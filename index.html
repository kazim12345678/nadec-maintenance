<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Breakdown Maintenance Dashboard</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

  <style>
    body {
      margin: 0;
      font-family: "Poppins", sans-serif;
      background: linear-gradient(to right, #eef2f3, #ffffff);
    }

    header {
      background: #003366;
      color: white;
      padding: 25px;
      text-align: center;
      font-size: 22px;
      font-weight: 700;
      letter-spacing: 1px;
    }

    .container {
      max-width: 1400px;
      margin: auto;
      padding: 20px;
    }

    .kpi-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
      gap: 15px;
      margin-bottom: 25px;
    }

    .kpi-card {
      background: white;
      padding: 18px;
      border-radius: 15px;
      box-shadow: 0px 4px 12px rgba(0,0,0,0.15);
      text-align: center;
      transition: 0.3s;
    }

    .kpi-card:hover {
      transform: translateY(-5px);
    }

    .kpi-card h2 {
      font-size: 16px;
      margin: 0;
      color: #003366;
    }

    .kpi-card p {
      font-size: 28px;
      font-weight: bold;
      margin: 10px 0 0;
      color: #222;
    }

    .chart-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(480px, 1fr));
      gap: 20px;
    }

    .chart-box {
      background: white;
      padding: 15px;
      border-radius: 15px;
      box-shadow: 0px 4px 12px rgba(0,0,0,0.12);
    }

    h3 {
      text-align: center;
      color: #003366;
    }

    textarea {
      width: 100%;
      height: 130px;
      margin-top: 15px;
      font-family: monospace;
      border-radius: 10px;
      padding: 10px;
      border: 1px solid #ccc;
    }

    button {
      margin-top: 15px;
      padding: 12px 18px;
      border: none;
      background: #003366;
      color: white;
      border-radius: 10px;
      cursor: pointer;
      font-size: 15px;
    }

    button:hover {
      background: #0055aa;
    }

    footer {
      text-align: center;
      padding: 15px;
      margin-top: 25px;
      font-size: 14px;
      color: gray;
    }
  </style>
</head>

<body>

<header>
  üöÄ Breakdown Maintenance KPI Dashboard (Editable Web Version)
</header>

<div class="container">

  <!-- KPI Cards -->
  <div class="kpi-grid">
    <div class="kpi-card">
      <h2>Total Downtime Hours</h2>
      <p id="totalDowntime">3466</p>
    </div>

    <div class="kpi-card">
      <h2>Total Breakdown Events</h2>
      <p id="totalEvents">8903</p>
    </div>

    <div class="kpi-card">
      <h2>Worst Month</h2>
      <p id="worstMonth">Jul</p>
    </div>

    <div class="kpi-card">
      <h2>Worst Machine</h2>
      <p id="worstMachine">M15</p>
    </div>

    <div class="kpi-card">
      <h2>Top Technician</h2>
      <p id="topTech">Dante</p>
    </div>
  </div>

  <!-- Charts -->
  <div class="chart-grid">

    <div class="chart-box">
      <h3>Monthly Downtime (Jan‚ÄìDec)</h3>
      <canvas id="monthlyChart"></canvas>
    </div>

    <div class="chart-box">
      <h3>Top Machines Breakdown Count</h3>
      <canvas id="machineChart"></canvas>
    </div>

    <div class="chart-box">
      <h3>Technician Contribution Share</h3>
      <canvas id="techChart"></canvas>
    </div>

  </div>

  <!-- Editable Data Section -->
  <h3>‚úçÔ∏è Edit Data (Monthly Downtime)</h3>
  <textarea id="monthlyData">
Jan,285
Feb,241
Mar,312
Apr,222
May,304
Jun,260
Jul,446
Aug,277
Sep,260
Oct,327
Nov,270
Dec,257
  </textarea>

  <button onclick="updateDashboard()">Update Dashboard</button>

</div>

<footer>
  Dashboard Created for Maintenance Breakdown Analysis | GitHub Pages Ready
</footer>

<script>
  let monthlyChart;

  function buildMonthlyChart(labels, values) {
    if (monthlyChart) monthlyChart.destroy();

    monthlyChart = new Chart(document.getElementById("monthlyChart"), {
      type: "bar",
      data: {
        labels: labels,
        datasets: [{
          label: "Downtime Hours",
          data: values
        }]
      }
    });
  }

  function updateDashboard() {
    let raw = document.getElementById("monthlyData").value.trim().split("\n");

    let labels = [];
    let values = [];

    raw.forEach(line => {
      let parts = line.split(",");
      labels.push(parts[0]);
      values.push(parseFloat(parts[1]));
    });

    buildMonthlyChart(labels, values);

    // Worst Month KPI
    let maxVal = Math.max(...values);
    let worstIndex = values.indexOf(maxVal);

    document.getElementById("worstMonth").innerText = labels[worstIndex];
  }

  // Machine Chart (Top Machines)
  new Chart(document.getElementById("machineChart"), {
    type: "bar",
    data: {
      labels: ["M15","M1","M14","M7","M2"],
      datasets: [{
        label: "Breakdown Count",
        data: [963,822,805,825,621]
      }]
    },
    options: {
      indexAxis: "y"
    }
  });

  // Technician Contribution Pie
  new Chart(document.getElementById("techChart"), {
    type: "pie",
    data: {
      labels: ["Dante","Sameer","Gilbert","Ali","Edgar"],
      datasets: [{
        data: [1541,1479,1395,753,1113]
      }]
    }
  });

  // Load Default Monthly Chart
  updateDashboard();
</script>

</body>
</html>

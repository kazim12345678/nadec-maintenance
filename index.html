<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NADEC Breakdown Maintenance Dashboard 2025</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- PDF Export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

  <style>
    body {
      margin: 0;
      font-family: "Poppins", sans-serif;
      background: #f5f7fb;
    }

    header {
      background: linear-gradient(135deg,#003366,#0055aa);
      color: white;
      padding: 25px;
      text-align: center;
      font-size: 24px;
      font-weight: 700;
    }

    .subhead {
      font-size: 14px;
      font-weight: 300;
      margin-top: 6px;
      color: #d9e6ff;
    }

    .container {
      max-width: 1400px;
      margin: auto;
      padding: 20px;
    }

    /* KPI Cards */
    .kpi-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 15px;
      margin-bottom: 25px;
    }

    .kpi-card {
      background: white;
      padding: 15px;
      border-radius: 15px;
      box-shadow: 0px 3px 10px rgba(0,0,0,0.12);
      text-align: center;
    }

    .kpi-card h2 {
      font-size: 14px;
      margin: 0;
      color: #003366;
    }

    .kpi-card p {
      font-size: 26px;
      font-weight: bold;
      margin: 8px 0 0;
      color: #111;
    }

    /* Charts */
    .chart-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(420px, 1fr));
      gap: 20px;
    }

    .chart-box {
      background: white;
      padding: 15px;
      border-radius: 15px;
      box-shadow: 0px 3px 10px rgba(0,0,0,0.10);
    }

    h3 {
      text-align: center;
      color: #003366;
      font-size: 17px;
    }

    /* Table Style */
    .section-box {
      margin-top: 35px;
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0px 3px 10px rgba(0,0,0,0.10);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
      margin-top: 10px;
    }

    th {
      background: #003366;
      color: white;
      padding: 8px;
      font-size: 13px;
    }

    td {
      padding: 7px;
      border-bottom: 1px solid #eee;
      text-align: center;
    }

    tr:hover {
      background: #f2f6ff;
    }

    .scroll-table {
      max-height: 260px;
      overflow-y: auto;
      margin-top: 10px;
    }

    /* PDF Button */
    .pdf-btn {
      background: linear-gradient(135deg,#7a0019,#b3002d);
      color: white;
      border: none;
      padding: 14px 25px;
      font-size: 15px;
      font-weight: bold;
      border-radius: 12px;
      cursor: pointer;
      margin-top: 30px;
      transition: 0.3s;
    }

    .pdf-btn:hover {
      transform: scale(1.05);
    }

    footer {
      text-align: center;
      padding: 15px;
      margin-top: 30px;
      font-size: 13px;
      color: gray;
    }

    /* Mobile Fix */
    @media(max-width:600px){
      header {font-size:18px;}
      .chart-grid {grid-template-columns: 1fr;}
    }
  </style>
</head>

<body>

<header>
  NADEC Maintenance Breakdown Dashboard 2025
  <div class="subhead">
    Downtime | Machine Failures | Technician Workload KPI Report
  </div>
</header>

<!-- DASHBOARD AREA (PDF EXPORT ONLY THIS) -->
<div id="dashboardContent" class="container">

  <!-- KPI Cards -->
  <div class="kpi-grid">
    <div class="kpi-card"><h2>Total Downtime Hours</h2><p>3466</p></div>
    <div class="kpi-card"><h2>Total Breakdown Events</h2><p>8903</p></div>
    <div class="kpi-card"><h2>Worst Downtime Month</h2><p>July</p></div>
    <div class="kpi-card"><h2>Highest Breakdown Machine</h2><p>M15</p></div>
    <div class="kpi-card"><h2>Top Technician Contributor</h2><p>Dante</p></div>
  </div>

  <!-- Charts -->
  <div class="chart-grid">
    <div class="chart-box">
      <h3>Monthly Downtime Hours</h3>
      <canvas id="monthlyChart"></canvas>
    </div>

    <div class="chart-box">
      <h3>Machine Breakdown Count</h3>
      <canvas id="machineChart"></canvas>
    </div>

    <div class="chart-box">
      <h3>Technician Contribution Share</h3>
      <canvas id="techChart"></canvas>
    </div>
  </div>

  <!-- Month Table -->
  <div class="section-box">
    <h3>üìÖ Month-wise Breakdown Downtime (HH:MM:SS)</h3>
    <div class="scroll-table">
      <table>
        <tr><th>Month</th><th>Total Downtime</th></tr>
        <tr><td>Jan</td><td>285:51:00</td></tr>
        <tr><td>Feb</td><td>241:58:00</td></tr>
        <tr><td>Mar</td><td>312:16:00</td></tr>
        <tr><td>Apr</td><td>222:32:00</td></tr>
        <tr><td>May</td><td>304:34:00</td></tr>
        <tr><td>Jun</td><td>260:13:00</td></tr>
        <tr style="font-weight:bold;background:#fff3cd;">
          <td>Jul</td><td>446:58:00 (Highest)</td>
        </tr>
        <tr><td>Aug</td><td>277:00:00</td></tr>
        <tr><td>Sep</td><td>260:12:00</td></tr>
        <tr><td>Oct</td><td>327:08:00</td></tr>
        <tr><td>Nov</td><td>270:41:00</td></tr>
        <tr><td>Dec</td><td>257:24:00</td></tr>
      </table>
    </div>
  </div>

  <!-- Machine Table -->
  <div class="section-box">
    <h3>‚öôÔ∏è Machine-wise Breakdown Frequency</h3>
    <div class="scroll-table">
      <table>
        <tr><th>Machine</th><th>Breakdowns</th></tr>
        <tr><td>M1</td><td>822</td></tr>
        <tr><td>M7</td><td>825</td></tr>
        <tr><td>M14</td><td>805</td></tr>
        <tr style="font-weight:bold;background:#f8d7da;">
          <td>M15</td><td>963 (Highest)</td>
        </tr>
        <tr><td>M2</td><td>621</td></tr>
        <tr><td>Crates Area</td><td>635</td></tr>
      </table>
    </div>
  </div>

  <!-- PDF Button -->
  <div style="text-align:center;">
    <button class="pdf-btn" onclick="downloadPDF()">
      üìÑ Download Dashboard PDF Report
    </button>
  </div>

</div>

<footer>
  NADEC Drinkable Plant | Breakdown Dashboard 2025 | GitHub Pages Ready
</footer>

<script>
  // Monthly Downtime Chart
  new Chart(document.getElementById("monthlyChart"), {
    type: "bar",
    data: {
      labels: ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],
      datasets: [{
        label: "Downtime Hours",
        data: [285,241,312,222,304,260,446,277,260,327,270,257]
      }]
    }
  });

  // Machine Breakdown Chart
  new Chart(document.getElementById("machineChart"), {
    type: "bar",
    data: {
      labels: ["M15","M7","M1","M14","M2"],
      datasets: [{
        label: "Breakdown Count",
        data: [963,825,822,805,621]
      }]
    },
    options: { indexAxis: "y" }
  });

  // Technician Pie Chart
  new Chart(document.getElementById("techChart"), {
    type: "pie",
    data: {
      labels: ["Dante","Sameer","Gilbert","Lito","Husam","Ali"],
      datasets: [{
        data: [1541,1479,1395,1236,1214,753]
      }]
    }
  });

  // PDF Export
  function downloadPDF() {
    const dashboard = document.getElementById("dashboardContent");

    html2pdf().set({
      margin: 0.4,
      filename: "NADEC_Maintenance_Report_2025.pdf",
      html2canvas: { scale: 2 },
      jsPDF: { format: "a4", orientation: "portrait" }
    }).from(dashboard).save();
  }
</script>

</body>
</html>
